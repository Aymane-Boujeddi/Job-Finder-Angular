@if (applications().length === 0) {
<div class="text-center py-12 px-8 bg-white border border-dashed border-zinc-200 rounded-xl">
    <p class="text-2xl mb-2">&#128203;</p>
    <p class="text-zinc-500 text-[0.9375rem] font-medium">No applications yet</p>
    <p class="text-zinc-400 text-[0.8125rem] mt-1">Find a job and click "Track" to start</p>
</div>
} @else {
<div class="grid grid-cols-[repeat(auto-fill,minmax(500px,1fr))] gap-6 max-md:grid-cols-1">
    @for (app of applications(); track app.id) {
    <div class="bg-white border border-zinc-200 rounded-xl overflow-hidden flex flex-col">
        <div class="px-6 py-5 border-b border-zinc-100 flex justify-between items-start gap-4">
            <div class="flex-1 min-w-0">
                <h3 class="text-lg font-semibold text-zinc-900 mb-1 leading-snug">{{ app.title }}</h3>
                <p class="text-sm text-zinc-500 font-medium">ğŸ¢ {{ app.company }}</p>
            </div>
            <span class="inline-block px-3 py-1.5 text-xs font-medium rounded-md capitalize"
                [class]="app.status === 'en_attente' ? 'bg-amber-100 text-amber-800' : app.status === 'accepte' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'">
                {{ app.status === 'en_attente' ? 'Pending' : app.status === 'accepte' ? 'Accepted' : 'Rejected' }}
            </span>
        </div>

        <div class="px-6 py-5 flex-1">
            <div class="grid grid-cols-2 gap-4 mb-4">
                <div class="flex flex-col gap-1">
                    <span class="text-xs text-zinc-500 font-medium uppercase tracking-wide">ğŸ“ Location</span>
                    <span class="text-sm text-zinc-900 font-medium">{{ app.location }}</span>
                </div>
                <div class="flex flex-col gap-1">
                    <span class="text-xs text-zinc-500 font-medium uppercase tracking-wide">ğŸ“… Applied On</span>
                    <span class="text-sm text-zinc-900 font-medium">{{ app.dateAdded | date: 'MMM d, y' }}</span>
                </div>
                <div class="flex flex-col gap-1">
                    <span class="text-xs text-zinc-500 font-medium uppercase tracking-wide">ğŸ”— Source</span>
                    <span class="text-sm text-zinc-900 font-medium">
                        <span
                            class="inline-block px-2 py-0.5 text-[0.6875rem] font-semibold rounded bg-blue-100 text-blue-800">{{
                            app.apiSource }}</span>
                    </span>
                </div>
            </div>

            @if (app.notes && app.notes.trim() !== '') {
            <div class="mt-4 p-3.5 bg-zinc-50 rounded-lg border border-zinc-100">
                <span class="text-xs text-zinc-500 font-semibold uppercase tracking-wide block mb-2">ğŸ“ Notes:</span>
                <p class="text-[0.8125rem] text-zinc-600 leading-relaxed m-0">{{ app.notes }}</p>
            </div>
            }
        </div>

        <div class="px-6 py-4 bg-zinc-50 border-t border-zinc-100 flex justify-between items-center gap-4 flex-wrap">
            <div class="flex gap-2">
                <a [href]="app.url" target="_blank" rel="noopener"
                    class="inline-flex items-center justify-center px-3 py-1 bg-transparent text-zinc-900 border border-zinc-300 rounded-md text-xs font-semibold no-underline transition-colors hover:bg-zinc-100 hover:border-zinc-400">
                    View Job â†—ï¸
                </a>
            </div>
            <div class="flex gap-2 items-center">
                <select
                    class="px-2 py-1.5 border border-zinc-300 rounded-md text-xs text-zinc-900 bg-white cursor-pointer outline-none transition-all focus:border-zinc-900 focus:ring-2 focus:ring-zinc-900/5 hover:border-zinc-400 min-w-[110px]"
                    [value]="app.status" (change)="onStatusChange(app.id!, $any($event.target).value)">
                    @for(status of statusOptions; track status.value ){
                    <option [value]="status.value">{{ status.label }}</option>
                    }
                </select>
                <button
                    class="inline-flex items-center justify-center px-3 py-1 bg-transparent text-red-600 border border-red-200 rounded-md text-xs font-semibold transition-colors hover:bg-red-50"
                    (click)="onDelete(app.id!)">
                    ğŸ—‘ï¸ Delete
                </button>
            </div>
        </div>
    </div>
    }
</div>
}